<nav class="navbar navbar-expand-lg custom-navbar px-4 py-3">

  <div class="container-fluid align-items-center">

    <!-- LOGO -->
    <a class="navbar-brand fw-bold text-primary fs-3" routerLink="/">
      Tazerh<span class="text-dark">Store</span>
    </a>

    <!-- DESKTOP SEARCH -->
    <div class="search-wrapper d-none d-lg-flex mx-auto col-6">
      <input
        type="text"
        class="form-control search-input"
        placeholder="Search for products..."
      />
      <button class="btn btn-primary search-btn">Search</button>
    </div>

    <!-- RIGHT ACTIONS -->
    <ul class="navbar-nav d-flex flex-row align-items-center gap-4">

      <!-- ACCOUNT -->
      <li class="nav-item dropdown d-none d-lg-block">
        <a
          class="nav-link d-flex align-items-center gap-2"
          data-bs-toggle="dropdown"
        >
          <img class="nav-icon" src="https://img.icons8.com/?size=48&id=11727&format=png">
          <span  class="fw-medium ">
            {{ authserviceService.isLoggedIn() ? 'Hi, ' + user.firstname : 'Account' }}
          </span>
        </a>

        <ul class="dropdown-menu dropdown-menu-end shadow-sm">
          <li *ngIf="!authserviceService.isLoggedIn()">
            <a class="dropdown-item" routerLink="/customersignin">Sign In</a>
          </li>
          <li><button class="dropdown-item text-dark" routerLink="/customerprofile" >Profile</button></li>
          <li *ngIf="authserviceService.isLoggedIn()">
            <button class="dropdown-item text-danger" (click)="logout()">Log Out</button>
          </li>
        </ul>
      </li>

      <!-- CART -->
      <li class="nav-item position-relative">
        <a routerLink="/cart" class="nav-link cart-link">
          <img class="nav-icon" src="https://img.icons8.com/?size=24&id=85080&format=png">
          <span class="cart-badge">{{ countno }}</span>
        </a>
      </li>

      <!-- MOBILE MENU -->
      <li class="nav-item d-lg-none">
        <button class="btn mobile-menu-btn" (click)="toggleMobileMenu()">
          â˜°
        </button>
      </li>

    </ul>

  </div>

  <!-- MOBILE SEARCH -->
  <div class="mobile-search d-lg-none mt-3 px-3">
    <input class="form-control" placeholder="Search products..." />
  </div>
</nav>

<!-- MOBILE MENU OVERLAY -->
<div class="mobile-menu-overlay" [class.show]="mobileMenuOpen">
  <div class="mobile-menu-card">
    <button class="btn-close ms-auto" (click)="toggleMobileMenu()"></button>

    <h5 class="fw-bold mb-4">
      {{ authserviceService.isLoggedIn() ? 'Hi, ' + user.firstname : 'Welcome' }}
    </h5>

    <a routerLink="/customersignin" *ngIf="!authserviceService.isLoggedIn()"
       class="btn btn-outline-primary w-100 mb-3"
       (click)="toggleMobileMenu()">
      Sign In
    </a>

    <a class="btn btn-outline-secondary w-100 mb-3"><button class="dropdown-item text-dark" routerLink="/customerprofile" >Profile</button></a>

    <button *ngIf="authserviceService.isLoggedIn()"
      class="btn btn-outline-danger w-100"
      (click)="logout(); toggleMobileMenu()">
      Log Out
    </button>
  </div>
</div>
